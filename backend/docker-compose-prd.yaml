version: "3"

name: tourquest
services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    restart: always
    env_file:
      - .env
    extra_hosts:
      - "host.docker.internal:host-gateway"
  server:
    build:
      context: ./.nginx
      dockerfile: Dockerfile
      args:
        - HTTP_ADDRESS=backend:8000
        - WS_ADDRESS=backend:8001
    restart: always
    ports: 
      - "${TOURQUEST_SERVER_PORT}:80"
    depends_on:
      - backend
      